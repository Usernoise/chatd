# –ë–æ—Ç –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–æ–≤

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö –∏ —Å–æ–∑–¥–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é OpenAI GPT.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìã –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é
- üèÜ –¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –æ—Ü–µ–Ω–∫–∞–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏  
- üì∏ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ —á–∞—Ç–∞ —á–µ—Ä–µ–∑ –ò–ò**
- üéôÔ∏è –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üí¨ ChatGPT-–ø–æ–º–æ—â–Ω–∏–∫ –≤ —á–∞—Ç–µ
- ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <your-repo>
cd chatd
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–∫–µ–Ω—ã:
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ —Ç–æ–∫–µ–Ω—ã:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
- `OPENAI_API_KEY` - –∫–ª—é—á OpenAI API (https://platform.openai.com/api-keys)
- `REPLICATE_API_TOKEN` - —Ç–æ–∫–µ–Ω Replicate API (–¥–ª—è —Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞, https://replicate.com/account)
- `SUNO_API_KEY` - –∫–ª—é—á Suno API (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏)
- `OPENAI_API_KEY_EXTENDED` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª—é—á OpenAI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
```bash
python chatd.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞:
```bash
chmod +x start.sh
./start.sh
```

## –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –§–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ üì∏

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ —á–∞—Ç–∞ –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ —Ç–æ–ø–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–Ω—è
2. –ù–∞—Ö–æ–¥–∏—Ç –∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ "–î–∏—Ä–µ–∫—Ç–æ—Ä–æ–º —á–∞—Ç–∞"  
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –ò–ò (Replicate)
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å –ø–æ–¥–ø–∏—Å—å—é "üì∏ –§–û–¢–û –î–ò–†–ï–ö–¢–û–†–ê –ß–ê–¢–ê üì∏"

### –ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "üèÜ –¢–æ–ø –¥–Ω—è"
- –ü—Ä–∏ –∫–æ–º–∞–Ω–¥–µ `/top`
- –í –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∞–≤—Ç–æ–æ—Ç—á–µ—Ç–∞—Ö (23:59 –ú–°–ö)

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å–∫ –∏ —Å–ø—Ä–∞–≤–∫–∞
- `/sum` - –ò—Ç–æ–≥–∏ –¥–Ω—è —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞
- `/top` - –¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–Ω—è + **—Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞**
- `/week` - –¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–µ–¥–µ–ª–∏
- `/date YYYY-MM-DD` - –ò—Ç–æ–≥–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
- `/topdate YYYY-MM-DD` - –¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
- `/q <–≤–æ–ø—Ä–æ—Å>` - –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å ChatGPT
- `/debug` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞

### –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏:
- **üìã –ò—Ç–æ–≥–∏ –¥–Ω—è** - —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- **üèÜ –¢–æ–ø –¥–Ω—è** - —Ä–µ–π—Ç–∏–Ω–≥ + —Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
- **‚ùì –í–æ–ø—Ä–æ—Å** - –ø–æ–º–æ—â—å –ø–æ ChatGPT
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–µ

### –ü—Ä–∏–º–µ—Ä—ã:
```
/date 2024-07-20        # –ò—Ç–æ–≥–∏ –∑–∞ 20 –∏—é–ª—è 2024
/topdate 2024-07-19     # –¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞ 19 –∏—é–ª—è 2024
? –ö–∞–∫ –¥–µ–ª–∞ —É –≤—Å–µ—Ö?      # –ë—ã—Å—Ç—Ä—ã–π –≤–æ–ø—Ä–æ—Å ChatGPT
```

### Inline —Ä–µ–∂–∏–º
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@your_bot_name day` –∏–ª–∏ `@your_bot_name week` –≤ –ª—é–±–æ–º —á–∞—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤.

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ —Ç–æ–∫–µ–Ω—ã
```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```bash
docker-compose up -d
```

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
docker-compose logs -f
```

4. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞:**
```bash
docker-compose down
```

### Systemd Service (–¥–ª—è Linux —Å–µ—Ä–≤–µ—Ä–æ–≤)

1. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ chatd.service:**
```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ñ–∞–π–ª–µ chatd.service
nano chatd.service
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª—É–∂–±—É:**
```bash
sudo cp chatd.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable chatd
sudo systemctl start chatd
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
sudo systemctl status chatd
```

4. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
sudo journalctl -u chatd -f
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chatd/
‚îú‚îÄ‚îÄ chatd.py                      # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
‚îú‚îÄ‚îÄ prompts.py                    # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è GPT
‚îú‚îÄ‚îÄ director_analyzer.py          # –ê–Ω–∞–ª–∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ —á–∞—Ç–∞
‚îú‚îÄ‚îÄ director_photo_generator.py   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ song_generator.py             # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º—É–∑—ã–∫–∏
‚îú‚îÄ‚îÄ photo_generator_api.py        # API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ç–æ
‚îú‚îÄ‚îÄ requirements.txt              # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ start.sh                      # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ chatd.service                 # Systemd service —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ Dockerfile                    # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml            # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
source venv/bin/activate
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
pip install -r requirements.txt
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
python chatd.py
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∏ API
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ API –∫–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ .env
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ API (OpenAI, Replicate, Suno)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker-compose up -d --build` 